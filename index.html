<!DOCTYPE html>
<html lang="en" ng-app="myApp">

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Ebook - Angular Assignment</title>
    <link rel="shortcut icon" href="img/favicon.png" />

    <!-- Bootstrap core CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom fonts for this template -->
    <link href="vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- Custom styles for this template -->
    <link href="css/landing-page.css" rel="stylesheet">

  </head>

  <body ng-controller="myCtrl as main">

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top">
      <div class="container">
        <a class="navbar-brand" href="#">EBOOK</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="#">Home</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Header -->
    <header class="intro-header">
      <div class="container">
        <div class="intro-message">
          <h1>Ebook</h1>
          <h3>An assignment for internship</h3>
          <hr class="intro-divider">
        </div>
      </div>
    </header>

    <!-- Page Content -->
    <section class="content-section-a">
      <div class="container">
        <div class="row">
          <div class="col-lg-12">
            <div class="clearfix"></div>
            <h2 class="section-heading text-center">All chapters</h2>
            <hr>
            <div ng-repeat="book in main.allBooks track by $index">
              <a>
              <h2 title="Click to view content" style="cursor:pointer" ng-click="myClickedBook($index)" data-toggle="modal" data-target="#myBookDetail">
                {{$index+1}} - {{book.title}}</h2></a><br>
                Content : {{(book.content | limitTo:15) + (book.content.length>15?'...' : '')}}<br><br>
            </div>
            <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Add chapter</button>
          </div>
        </div>
      </div>
    </section>
    <!-- End Page Content -->



    <!-- modal to add chapter-->
    <div id="myModal" class="modal fade text-center" role="dialog">
       <div class="modal-dialog">
           <div  class="modal-content">
               <div class="header" style="text-align:center;">
                   <button type="button" class="close" data-dismiss="modal">&times;</button>
                   <h3 style="color:black">Add Chapter</h3>
               </div>
               <div class="modal-body">
                   <form onsubmit="return validateForm()">
                     <div class="form-group">
                        <label for="title">Title:</label>
                        <input type="text" class="form-control" placeholder="Title" ng-model="books.title" id="modaltitle"/><br>
                    </div>
                    <div class="form-group">
                        <label for="content">Content:</label>
                        <textarea rows="4" cols="50" class="form-control" ng-model="books.content" placeholder="Content" id="modalcontent"></textarea><br><br>
                    </div>
                    <button type="submit" class="btn btn-primary btn-warning" id="verifybutton">VERIFY</button>
                    <button type="submit" ng-click="myBookFunction()" class="btn btn-primary btn-success" style="display:none"id="submitbutton">SUBMIT</button>
                  </form>
             </div>
             <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-block" data-dismiss="modal">Close</button>
             </div>
           </div>
       </div>
    </div>
    <!-- end modal -->


    <!-- modal to view/edit chapter details -->
    <div id="myBookDetail" class="modal fade text-center" role="dialog">
       <div class="modal-dialog">
           <div  class="modal-content">
               <div class="header" style="text-align:center;">
                   <button type="button" class="close" data-dismiss="modal">&times;</button>
                   <h3 style="color:black">Chapter Details</h3>
               </div>
               <div class="modal-body" id="savedChapterDetails">
                   <h3><strong>{{bookName}}</strong> </h3>
                   <p>{{bookContent}}</p>
                   <button type="button" class="btn btn-info" ng-click="myBookEditFunction()"><i class="fa fa-pencil" aria-hidden="true"></i> EDIT</button>
               </div>
               <div class="modal-body" id="editChapterDetails" style="display:none">
                 <div class="form-group">
                    <label for="title">Title:</label>
                    <input type="text" class="form-control" placeholder="Title" ng-model="bookName" id="bookname"/><br>
                 </div>
                 <div class="form-group">
                    <label for="content">Content:</label>
                    <textarea rows="4" cols="50" class="form-control" ng-model="bookContent" value="{{bookContent}}" id="bookcontent"></textarea><br><br>
                 </div>
                   <button type="button"  class="btn btn-primary btn-success" id="savebutton">SAVE</button>
               </div>
               <div class="modal-footer">
                    <button type="button" class="btn btn-primary btn-block" data-dismiss="modal">Close</button>
               </div>
           </div>
       </div>
    </div>
    <!-- end modal -->

    <!-- Footer -->
    <footer>
      <div class="container text-center">
        <p class="copyright text-muted small">Copyright &copy; Diwaker 2017. All Rights Reserved</p>
      </div>
    </footer>

    <!-- Bootstrap core JavaScript -->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/popper/popper.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.js"></script> -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular-route.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.5.8/angular-route.min.js"></script>

    <!-- Validation of form, to ensure input fields are not empty when adding chapters -->
    <script>
      function validateForm() {
          var title = document.getElementById('modaltitle').value;
          var content = document.getElementById('modalcontent').value;
          if (title == "") {
            alert("Please enter title of the chapter!");
            return false;
          }
          else if (content == ""){
            alert("Please enter content of the chapter!");
            return false;
          }
          else{
            jQuery('#verifybutton').hide();
            jQuery('#submitbutton').show();
          }

      }
      // $('#myModal').on('hidden.bs.modal', function () {
      //     $(this).find("input,textarea").val('').end();
      //
      //
      // });

      </script>
    <!-- App js and routes js -->
    <script src="angular/app.js"></script>
  </body>

</html>
